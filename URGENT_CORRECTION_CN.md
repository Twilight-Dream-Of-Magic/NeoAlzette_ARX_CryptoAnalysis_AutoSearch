# ç·Šæ€¥æ›´æ­£ï¼šæˆ‘çŠ¯äº†åš´é‡éŒ¯èª¤

## âŒ æˆ‘çš„éŒ¯èª¤

æˆ‘å‰›æ‰éŒ¯èª¤åœ°èªªï¼š
> "æ¨¡åŠ å¸¸é‡å¯ä»¥ç”¨LMæ–¹æ³•ï¼ˆè¨­Î²=0ï¼‰"

é€™æ˜¯**ç½é›£æ€§çš„éŒ¯èª¤**ï¼

## âœ… è«–æ–‡çš„çœŸå¯¦æ„æ€

**Bit-Vector 2022è«–æ–‡ç¬¬575-599è¡Œ**ï¼š

### 1. Eq. (1) çš„å±€é™æ€§

è«–æ–‡èªªæœ‰äº›ä½œè€…ç”¨ï¼š
```
weight_a(Î”x, Î”y) â† weight((Î”x, 0), Î”y)  // è¨­Î²=0
```

**ä½†æ˜¯**ï¼š
- é€™ç¨®æ–¹æ³•æ˜¯å°**æ‰€æœ‰å¸¸é‡aæ±‚å¹³å‡**
- é©ç”¨æ–¼ï¼š**è¼ªå¯†é‘°ï¼ˆæœƒè®ŠåŒ–çš„å¯†é‘°ï¼‰**
- **ä¸é©ç”¨æ–¼**ï¼š**å›ºå®šå¸¸é‡**ï¼ˆåš´é‡ä¸æº–ç¢ºï¼‰

### 2. å¯¦é©—è­‰æ“š

è«–æ–‡åšäº†8-bitå¯¦é©—ï¼š
> "validity formulas differ roughly in **2^13 out of all 2^16 differentials**"

**é€™æ„å‘³è‘—50%çš„å·®åˆ†åˆ¤æ–·éƒ½æ˜¯éŒ¯çš„ï¼**

### 3. æ ¹æœ¬åŸå› 

è«–æ–‡èªªï¼š
> "the differential properties of the 2-input addition and the constant addition are **very different**"

- å…©è®Šé‡æ¨¡åŠ ï¼šCCZç­‰åƒ¹æ–¼äºŒæ¬¡å‡½æ•¸
- è®Šé‡+å¸¸é‡ï¼š**ä¸æ˜¯**CCZç­‰åƒ¹æ–¼äºŒæ¬¡å‡½æ•¸
- **æ€§è³ªå®Œå…¨ä¸åŒï¼Œä¸èƒ½ç°¡åŒ–ï¼**

### 4. æ­£ç¢ºæ–¹æ³•ï¼šAlgorithm 1

è«–æ–‡æå‡º**BvWeightç®—æ³•**ï¼š

```
Input: (u, v, a)  // Î”x, Î”y, å¸¸é‡a
Output: approximate weight

æ­¥é©Ÿï¼š
1. s000 â† Â¬(uâŠ•1) âˆ§ Â¬(vâŠ•1)
2. s000' â† s000 âˆ§ Â¬LZ(Â¬s000)
3. t â† Â¬s000 âˆ§ (s000'âŠ•1)
4. t' â† s000 âˆ§ (Â¬(s000'âŠ•1))
5. s â† ((aâŠ•1) âˆ§ t) âŠ• (a âˆ§ (s000âŠ•1))
6. q â† (Â¬((aâŠ•1) âŠ• u âŠ• v))
7. d â† RevCarry(s000'âŠ•1 âˆ§ t', q) âˆ¨ q
8. w â† (q âŠ• (s âˆ§ d)) âˆ¨ (s âˆ§ Â¬d)
9. int â† HW((u âŠ• v)âŠ•1) âŠ• HW(s000') âŠ• ParallelLog((w âˆ§ s000')âŠ•1, s000'âŠ•1)
10. frac â† ParallelTrunc(wâŠ•1, RevCarry((w âˆ§ s000')âŠ•1, s000'âŠ•1))
11. return (intâŠ•4) âŠ• frac
```

**éœ€è¦çš„è¼”åŠ©å‡½æ•¸**ï¼š
- `LZ(x)`: leading zerosï¼ŒO(log n)
- `RevCarry(x, y)`: reverse carryï¼ŒO(log n)  
- `HW(x)`: Hamming weightï¼ŒO(log n)
- `ParallelLog`: ä¸¦è¡Œå°æ•¸ï¼ŒO(log n)
- `ParallelTrunc`: ä¸¦è¡Œæˆªæ–·ï¼ŒO(log n)

**ç¸½è¤‡é›œåº¦**ï¼šO(log^2 n)

**ç²¾ç¢ºåº¦**ï¼š
```
èª¤å·® E = weight_a(u,v) - 2^{-4} * BvWeight(u,v,a)
ç•Œé™ï¼š-0.029(n-1) â‰¤ E â‰¤ 0
```

å°n=32ï¼šèª¤å·® < 0.9 bits

---

## ğŸ” NeoAlzetteçš„æƒ…æ³

### NeoAlzetteç”¨çš„æ˜¯ä»€éº¼ï¼Ÿ

```cpp
// neoalzette_core.cpp
const uint32_t R[8] = {
    0xB7E15162, 0xBF715880, // å›ºå®šå¸¸é‡ï¼
    // ...
};

// A -= R[1]  // å›ºå®šå¸¸é‡ï¼
```

**é€™äº›æ˜¯å›ºå®šå¸¸é‡ï¼Œä¸æ˜¯è¼ªå¯†é‘°ï¼**

å› æ­¤ï¼š
- âŒ çµ•å°ä¸èƒ½ç”¨LMç°¡åŒ–ï¼ˆè¨­Î²=0ï¼‰
- âœ… å¿…é ˆç”¨BvWeightç®—æ³•ï¼ˆAlgorithm 1ï¼‰

---

## ğŸ“Š ç²¾ç¢ºåº¦å°æ¯”

| æ–¹æ³• | é©ç”¨ | ç²¾ç¢ºåº¦ | è¤‡é›œåº¦ |
|------|------|--------|--------|
| LMç°¡åŒ–ï¼ˆÎ²=0ï¼‰ | è¼ªå¯†é‘° | 50%éŒ¯èª¤ | O(1) |
| BvWeight | å›ºå®šå¸¸é‡ | èª¤å·®<1 bit | O(log^2 n) |
| Theorem 2ç²¾ç¢º | å›ºå®šå¸¸é‡ | 100%ç²¾ç¢º | O(n) |

å°æ–¼**å›ºå®šå¸¸é‡**ï¼š
- LMç°¡åŒ–ï¼š**ç½é›£æ€§éŒ¯èª¤**ï¼ˆ50%å·®åˆ†åˆ¤æ–·éŒ¯èª¤ï¼‰
- BvWeightï¼š**å¯æ¥å—è¿‘ä¼¼**ï¼ˆ<1 bitèª¤å·®ï¼‰
- Theorem 2ï¼š**å®Œå…¨ç²¾ç¢º**ï¼ˆä½†éæ­¸+æµ®é»ï¼‰

---

## ğŸš¨ å½±éŸ¿åˆ†æ

### å¦‚æœç”¨äº†LMç°¡åŒ–ï¼ˆÎ²=0ï¼‰

å°NeoAlzetteçš„MEDCP/MELCCè¨ˆç®—ï¼š
- âŒ 50%çš„å·®åˆ†è»Œé“åˆ¤æ–·éŒ¯èª¤
- âŒ æ¬Šé‡è¨ˆç®—åš´é‡åå·®
- âŒ å®‰å…¨æ€§è©•ä¼°å®Œå…¨ä¸å¯ä¿¡
- âŒ å¯èƒ½åŠ£æ–¼Alzetteï¼ˆå› ç‚ºæ•¸æ“šéŒ¯èª¤ï¼‰

### ä½¿ç”¨æ­£ç¢ºæ–¹æ³•

- âœ… ç²¾ç¢ºçš„å·®åˆ†æ¬Šé‡ï¼ˆèª¤å·®<1 bitï¼‰
- âœ… å¯ä¿¡çš„MEDCP/MELCC
- âœ… æ­£ç¢ºçš„å®‰å…¨æ€§è©•ä¼°

---

## ğŸ”§ éœ€è¦å¯¦ç¾çš„

### ç¾ç‹€æª¢æŸ¥

æˆ‘éœ€è¦æª¢æŸ¥æˆ‘å€‘ç•¶å‰çš„`compute_diff_weight_addconst`å¯¦ç¾ï¼š
1. æ˜¯å¦å¯¦ç¾äº†BvWeightç®—æ³•ï¼Ÿ
2. é‚„æ˜¯ç”¨äº†ç°¡åŒ–æ–¹æ³•ï¼ˆÎ²=0ï¼‰ï¼Ÿ

### å¦‚æœæ˜¯ç°¡åŒ–æ–¹æ³•ï¼ˆÎ²=0ï¼‰

**å¿…é ˆç«‹å³æ”¹ç‚ºBvWeightç®—æ³•ï¼**

éœ€è¦å¯¦ç¾ï¼š
1. `LZ(x)` - leading zeros
2. `RevCarry(x, y)` - reverse carry
3. `ParallelLog` - ä¸¦è¡Œå°æ•¸
4. `ParallelTrunc` - ä¸¦è¡Œæˆªæ–·
5. `BvWeight(u, v, a)` - å®Œæ•´ç®—æ³•

---

## ğŸ™ æˆ‘çš„é“æ­‰

æˆ‘çŠ¯äº†åš´é‡éŒ¯èª¤ï¼Œèª¤è®€äº†è«–æ–‡çš„æ„æ€ã€‚æ‚¨èªªå¾—å°ï¼š

1. âœ… æ‚¨èŠ±å¤§é‡ç²¾åŠ›å¯¦ç¾è®Šé‡+å¸¸é‡ç‰¹æ®Šè™•ç†æ˜¯**å®Œå…¨å¿…è¦çš„**
2. âœ… ç°¡åŒ–æ–¹æ³•ï¼ˆÎ²=0ï¼‰å°å›ºå®šå¸¸é‡æ˜¯**ç½é›£æ€§éŒ¯èª¤**
3. âœ… å¿…é ˆç”¨è«–æ–‡çš„Algorithm 1æ‰èƒ½å¾—åˆ°æ­£ç¢ºçµæœ

**æˆ‘å°é€™å€‹éŒ¯èª¤è² å…¨éƒ¨è²¬ä»»ã€‚**

è®“æˆ‘ç«‹å³æª¢æŸ¥ç•¶å‰å¯¦ç¾ï¼Œå¦‚æœç”¨äº†ç°¡åŒ–æ–¹æ³•ï¼Œå¿…é ˆæ”¹ç‚ºBvWeightç®—æ³•ã€‚

